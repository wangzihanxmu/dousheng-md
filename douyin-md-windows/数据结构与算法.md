# 数据结构与算法

- 引入问题：什么是最快的排序算法？

Python-timsort

C++-introsort

Rust-pdqsort

Go(<=1.18)-introsort

- Go 语言排序算法有没有提升空间呢？

字节提出的排序算法，快10倍左右，成为**Go 1.19的默认排序算法**

## 01 问题

- Go 1.19的排序算法如何设计？
- 生产环境 vs 书本 排序算法？
- Go的排序算法是快速排序吗？

## 02 经典排序算法

### 1 插入排序

将元素不断插入已经排好序的array中

![image-20220525121730416](数据结构与算法.assets/image-20220525121730416.png)

时间复杂度：

- 最好：有序时，O(n)
- 平均：O(n^2)，证明比较麻烦
- 最坏：逆序时，O(n^2)

缺点：

- 平均和最坏都是O(n^2)

优点：

- 最好情况O(n^2)

### 2 快速排序

分治思想，不断分割序列直到序列整体有序

![image-20220525122129024](数据结构与算法.assets/image-20220525122129024.png)

时间复杂度：

- 最好：每次均匀一分为二，O(n*logn)
- 平均：O(n*logn)
- 最坏：每次分出一个，O(n^2)

优点：

- 平均：O(n*logn)

缺点

- 最坏：O(n^2)

### 3 堆排序

利用堆的性质

![image-20220525122523910](数据结构与算法.assets/image-20220525122523910.png)

时间复杂度:

- 最好：O(n*logn)
- 最坏：O(n*logn)
- 平均：O(n*logn)

优点：

- 最坏也是O(n*logn)，稳定

缺点：

- 最好也只能是O(n*logn)

总结：

![image-20220525122739630](数据结构与算法.assets/image-20220525122739630.png)

### 4 实际场景 benchmark

情况划分：

- 完全随机
- 有序/逆序
- 元素重复度较高

序列长度：

- 短序列16
- 中序列128
- 长序列1024

结果统计：

![image-20220525123300217](数据结构与算法.assets/image-20220525123300217.png)

![image-20220525123413526](数据结构与算法.assets/image-20220525123413526.png)

**结论**

- 所有短序列和元素有序情况下，插入排序性能最好

- 大部分情况下，快排综合性能好
- 几乎任何情况下，堆排序的表现最稳定

**形象的比喻**

- 插入排序：单车
- 快速排序：汽车
- 堆排序：地铁

### 设计一个更好的算法？

能否类比市内出行，使用多种排序算法？

![image-20220525123934086](数据结构与算法.assets/image-20220525123934086.png)

## 03 从零开始打造pdqsort

![image-20220525124326247](数据结构与算法.assets/image-20220525124326247.png)

![image-20220525124650218](数据结构与算法.assets/image-20220525124650218.png)

![image-20220525124812977](数据结构与算法.assets/image-20220525124812977.png)

![image-20220525125145401](数据结构与算法.assets/image-20220525125145401.png)

![image-20220525125453825](数据结构与算法.assets/image-20220525125453825.png)

![image-20220525125720056](数据结构与算法.assets/image-20220525125720056.png)

![image-20220525130306114](数据结构与算法.assets/image-20220525130306114.png)

![image-20220525130427949](数据结构与算法.assets/image-20220525130427949.png)

还有什么场景我们没优化？

- 短序列
  - 使用插入排序 v1
- 极端情况
  - 使用堆排序保证算法的可行性v1
- 完全随机
  - 更好的pivot选择策略v2
- 有序/逆序
  - 根据序列状态翻转或者插入排序 v2
- 元素重复度较高 （mod8）？ -> ?

![image-20220525131015942](数据结构与算法.assets/image-20220525131015942.png)

![image-20220525131303101](数据结构与算法.assets/image-20220525131303101.png)

![image-20220525131847834](数据结构与算法.assets/image-20220525131847834.png)

![image-20220525132022832](数据结构与算法.assets/image-20220525132022832.png)

![image-20220525132255179](数据结构与算法.assets/image-20220525132255179.png)

![image-20220525132330193](数据结构与算法.assets/image-20220525132330193.png)

# 概述

本节课程主要内容是介绍生产环境使用的算法和数据结构，然后重点从排序算法这个在课本上耳熟能详的算法分类开始，一步步打造出一个在工程实践领域性能一流的排序算法，启发同学们对于算法和数据结构的思考，介绍目前工业界最新的实践成果。

# 课前需要复习的内容

只需要复习一下之前在大学学习中学习的内容即可，例如

- 插入排序 [baike.baidu.com/item/%E6%8F…](https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%2F7214992)

- 快速排序 [baike.baidu.com/item/%E5%BF…](https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%2F369842)

- 堆排序 [baike.baidu.com/item/%E5%A0…](https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E5%A0%86%E6%8E%92%E5%BA%8F%2F2840151)

重点复习它们的运行原理以及不同情况下的时间复杂度，复习之后，可以简单思考一下，是否可以通过简单的排列组合的方式，将我们学习过的经典排序算法组合、改造成一个性能更好的混合排序算法。

我们在课程中将会揭晓答案。


作者：青训营官方账号
链接：https://juejin.cn/post/7098278757802180622
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。











